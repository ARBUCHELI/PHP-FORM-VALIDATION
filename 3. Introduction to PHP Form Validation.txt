# INTRODUCTION TO PHP FORM VALIDATION
-------------------------------------

* Introduction
--------------
In this lesson, we’ll be using PHP to handle user input submitted through HTML forms. We’ll be performing form validations on the submitted data in order to protect our website and its 
users.

Websites and applications in production nearly always use front-end validations (HTML and JavaScript validations done on the client-side), but these validations are designed to provide a 
better user experience—NOT for security. A user could circumvent front-end validation by intentionally or accidentally turning off JavaScript in their browser. We also need to protect 
against man-in-the-middle attacks, where a malicious actor changes data after it has been submitted by the client.

The back-end should never trust the data it receives from the client. Either intentionally or not, bad data from the client has the potential to expose sensitive information, corrupt our 
data, or significantly slow down our server. In this lesson, we’ll be working with forms with no front-end validations in place; this will simulate the untrustworthy nature of client-side validation.

We’ll be using PHP to handle the logic to receive POST requests, validate the data, store the data in the back-end, and display meaningful feedback to the user.

--------------------------------------------------------------------------------------------------------------------------------------------------------------------

* Form Handling
---------------
Throughout this lesson, we’ll be using a PHP file to present an HTML form to users. We’ll be using the POST method attribute for more secure input submission. This means all the data 
submitted will be available in the superglobal associative array: $_POST.

In order for the user’s input to be included in the $_POST array, we provide a name attribute within the HTML. After submitting the form, this name will be the key in the $_POST array and 
the user’s input will be the value assigned to that key.

<form method="post" action="">
Your Favorite Programming Language: <input type="text" name="language">
<input type="submit" value="Submit Language">
</form>

Above we have an HTML form with a method of "post". We could provide an alternate URL for users to navigate to after submitting their form (eg. action="some_page.php"). Since we want 
users to have the opportunity to submit the form again if they have errors, we’ll leave the action as an empty string—this means that once it’s submitted, users will be served the same PHP file that originally served them the form. Our form contains an input assigned the name "language". If a user entered “PHP” (as we would assume…) into the language input of the above form and then submitted the form, their URL would not change. However, within the PHP code, the $_POST array would contain a key => value pair of "language" => "PHP".

echo $_POST["language"]; // Prints: PHP

Let’s handle an HTML form with some PHP code!

index.php
---------
<html>
	<body>
		<form method="post" action="">
			Your name:
			<br>
  		<input type="text" name="name">
 			<br><br>
  		What is the best thing about learning to code:
  		<br>
  		<input type="text" name="best">
  		<br><br> 
  		<input type="submit" value="Submit Answers">
		</form>
    <div id="form-output">
      <p id="name">
        Hello, <?= $_POST["name"]?>!
      </p>
      <p id="best">
        I am glad you enjoy <?= $_POST["best"]?>.
      </p>
    </div>
		<a href="index.php">Reset</a>
	</body>
</html>

------------------------------------------------------------------------------------------------------------------------------------------------------------------

* Simple Validation
-------------------
In the previous exercise, we simply displayed the user input we received. Now we want to provide the user with feedback if their input isn’t correct. We’ll validate (confirm the 
correctness of) the data we receive. If the input is deemed invalid, we’ll want to give the user meaningful feedback so that they can correct their mistake and attempt to submit the form 
again.

We’ll need to make several modifications to the PHP file that we use to serve our form to users:

	1. Add PHP code to check the validity of a user’s input if the form has been submitted.

	2. Add an HTML element to display an error message to the user if their submission is not valid.

	3. Fill each field in the form with the user’s previously submitted input.

Our third task has to do with creating an improved user experience. Have you ever had to refill every field in a form after submitting it incorrectly? It’s so frustrating! By filling in 
the user’s submitted values, they’ll be able to quickly correct any fields with errors without having to start over from scratch. To accomplish this, we’ll assign each of the HTML form 
element’s value attribute—aside from the "submit" input itself—to the data submitted by the user for each field.

For the purposes of this exercise, let’s assume that “PHP” is the only valid submission for the user’s favorite language. Here’s how we might update our form from the previous exercise to 
accomplish the three tasks above:

<?php
$validation_error = "";
$user_language = "";

if ($_SERVER["REQUEST_METHOD"] === "POST") {
$user_language = $_POST["language"];
  if ($user_language != "PHP") {
    $validation_error = "* Your favorite language must be PHP!";
  } 
}
?>

<form method="post" action="">
Your Favorite Programming Language: <input type="text" name="language" value="<?php echo $user_language;?>">
<p class="error"><?= $validation_error;?></p>
<input type="submit" value="Submit Language">
</form>

Let’s walk through the above code.

	. We first assign $validation_error and $user_language to empty strings. We use these PHP values in our HTML, but, if a user has NOT yet submitted their form, we don’t want these 
	elements to have filled in values.

	. Remember that we’re validating the form data only AFTER it’s been submitted by the user at least once. To ensure that, we only run our validation code if 
	($_SERVER["REQUEST_METHOD"] === "POST"), which indicates that the current form has been submitted.

	. Within our if block, we grab the relevant value from the $_POST array: $_POST["language"]. We assign this value to our $user_language variable. This one step actually 
	accomplishes two things! It gives us an easy way to talk about the value the user submitted to this field, and it also means the value of the HTML element will now be the user’s 
	submission rather than an empty string.

	. If the value the user submitted is NOT correct, we assign an error message to $validation_error so that this part of the HTML will now give the user important feedback.

Let’s give it a try!

index.php
---------
<?php
// Define checkWord() here:
function checkWord($input, $letter) {
  if ($_SERVER["REQUEST_METHOD"] === "POST" && strtolower($input[0] != $letter)) {
    return "* This word must start with the letter ${letter}!";
  } else {
    return "";
  }
}
?>
  
<h1>Time to Practice our ABCs</h1>
<form method="post" action="">
    Enter a word that starts with the letter "a":
    <br>
    <input type="text" name="a-word" id="a-word" value="<?= $_POST["a-word"];?>">
    <p class="error" id="a-error"><?= checkWord($_POST["a-word"], "a");?></p>
    <br>      
      
    <br>     
    Enter a word that starts with the letter "b":
    <br>
    <input type="text" id="b-word" name="b-word" value="<?= $_POST["a-word"];?>">
    <p class="error" id="b-error"><?= checkWord($_POST["b-word"], "b");?></p>
    <br>      
      
    <br>
    Enter a word that starts with the letter "c":
    <br>
    <input type="text" id="c-word" name="c-word" value="<?= $_POST["a-word"];?>">
    <p class="error" id="c-error"><?= checkWord($_POST["c-word"], "c");?></p>
    <br>      
      
    <br>
    <input type="submit" value="Submit Words">
</form>
<div>
    <h3>"a" is for: <?= $_POST["a-word"];?><h3>
    <h3>"b" is for: <?= $_POST["b-word"];?><h3>
    <h3>"c" is for: <?= $_POST["c-word"];?><h3>    
<div>  

------------------------------------------------------------------------------------------------------------------------------------------------------------------




























